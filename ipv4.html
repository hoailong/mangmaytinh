<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Chia mạng con IPV4 - Mạng máy tính</title>

  <link rel="shortcut icon" type="image/x-icon" href="img/ninja-coder.png">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
  <!-- Toastr style -->
  <link href="css/plugins/toastr/toastr.min.css" rel="stylesheet">
  <link href="css/plugins/iCheck/custom.css" rel="stylesheet">
  <link href="css/animate.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="css/mystyle.css" rel="stylesheet">

</head>

<body class="">

  <div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
      <div class="sidebar-collapse">
        <ul class="nav metismenu tooltip-demo" id="side-menu">
          <li class="nav-header">
            <div class="dropdown profile-element">
              <span>
                <img alt="image" class="img-circle" src="img/profile_small.jpg" style="height:48px">
              </span>
              <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">Phan Văn Hoài</strong>
                  </span> <span class="text-muted text-xs block">IT1 - K58 <b class="caret"></b></span> </span> </a>
              <ul class="dropdown-menu animated fadeInRight m-t-xs">
                <li><a href="#">Coppy code nhớ ghi nguồn :)</a></li>
              </ul>
            </div>
            <div class="logo-element">
              <span>
                <img alt="image" class="img-circle" src="img/profile_small.jpg" style="height:48px">
              </span>
            </div>
          </li>
          <li>
            <a href="index.html" data-toggle="tooltip" data-placement="right" title="Dijkstra - Bellam Ford"><i class="fa fa-paper-plane-o"></i> <span class="nav-label">Dijkstra - Bellam Ford</span></a>
          </li>
          <li>
            <a href="checksum-crc.html" data-toggle="tooltip" data-placement="right" title="UDP Checksum -CRC"><i class="fa fa-bug"></i> <span class="nav-label">UDP Checksum - CRC</span> </a>
          </li>
          <li>
            <a href="hamming.html" data-toggle="tooltip" data-placement="right" title="Hamming"><i class="fa fa-code"></i> <span class="nav-label">Hamming</span> </a>
          </li>
          <li class="active">
            <a href="ipv4.html" data-toggle="tooltip" data-placement="right" title="Chia mạng con IPv4"><i class="fa fa-sitemap"></i> <span class="nav-label">Chia mạng con IPv4</span> </a>
          </li>
          <li>
            <a href="demo-socket.html" data-toggle="tooltip" data-placement="right" title="Demo Socket"><i class="fa fa-bolt"></i> <span class="nav-label">Demo Socket</span> </a>
          </li>
        </ul>

      </div>
    </nav>
    <div id="page-wrapper" class="white-bg">
      <div class="row border-bottom">
        <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
          <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" method="post">
              <div class="form-group">
                <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
              </div>
            </form>
          </div>
          <ul class="nav navbar-top-links navbar-right">
            <li>
              <a href="#">
                <i class="fa fa-info-circle"></i> Sản phẩm bài tập lớn môn Mạng máy tính
              </a>
            </li>
          </ul>

        </nav>
      </div>
      <br />
      <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
          <div class="col-md-4">
            <div class="ibox float-e-margins">
              <div class="ibox-title">
                <h5>Chia mạng con IPv4 <small></small></h5>
                <div class="ibox-tools">
                  <a class="collapse-link">
                    <i class="fa fa-chevron-up"></i>
                  </a>
                  <a class="close-link">
                    <i class="fa fa-times"></i>
                  </a>
                </div>
              </div>
              <div class="ibox-content">
                <div class="row">
                  <div class="form-group">
                    <label class="col-sm-3 control-label">Network Class </label>
                    <div class="col-sm-9">
                      <div class="i-checks">
                        <label> <input type="radio" checked="" value="" name="network_class"> <i></i> Any </label>
                        <label> <input type="radio" value="a" name="network_class"> <i></i> A </label>
                        <label> <input type="radio" value="b" name="network_class"> <i></i> B </label>
                        <label> <input type="radio" value="c" name="network_class"> <i></i> C </label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">Subnet</label>
                    <div class="col-sm-9">
                      <select class="form-control m-b" name="prefix" id=subnets>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">IP Address</label>
                    <div class="col-sm-9"><input type="text" class="form-control" id="txtIP"></div>
                  </div>
                  <div class="col-sm-9 col-sm-offset-3 m-t">
                    <button class="btn btn-primary" id="btn-calculatorIP"><i class="fa fa-play"></i> Calculate</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-8">
            <div class="ibox float-e-margins">
              <div class="ibox-title">
                <h5>Result <small></small></h5>
                <div class="ibox-tools">
                  <a class="collapse-link">
                    <i class="fa fa-chevron-up"></i>
                  </a>
                  <a class="close-link">
                    <i class="fa fa-times"></i>
                  </a>
                </div>
              </div>
              <div class="ibox-content hamming-content">
                <div class="scroll_content">
                  <div class="table-responsive">
                    <table class="table table-hover table-bordered table-striped" id="inforIP-table">
                      <tbody>
                        <tr>
                          <th>IP Address:</th>
                          <td class="ip_address"></td>
                        </tr>
                        <tr>
                          <th>Network Address:</th>
                          <td class="network_address"></td>
                        </tr>
                        <tr>
                          <th>Usable Host IP Range:</th>
                          <td class="usable_range_host"></td>
                        </tr>
                        <tr>
                          <th>Broadcast Address:</th>
                          <td class="broadcast_address"></td>
                        </tr>
                        <tr>
                          <th>Total Number of Hosts:</th>
                          <td class="total_host"></td>
                        </tr>
                        <tr>
                          <th>Number of Usable Hosts:</th>
                          <td class="usable_host"></td>
                        </tr>
                        <tr>
                          <th>Subnet Mask:</th>
                          <td class="subnet_mask"></td>
                        </tr>
                        <tr>
                          <th>Wildcard Mask:</th>
                          <td class="wildcard"></td>
                        </tr>
                        <tr>
                          <th>Binary Subnet Mask:</th>
                          <td class="binary_subnetmask"></td>
                        </tr>
                        <tr>
                          <th>IP Class:</th>
                          <td class="ip_class"></td>
                        </tr>
                        <tr>
                          <th>CIDR Notation:</th>
                          <td class="cidr"></td>
                        </tr>
                        <tr>
                          <th>IP Type:</th>
                          <td class="ip_type"></td>
                        </tr>
                        <tr>
                          <td colspan="2">&nbsp;</td>
                        </tr>
                        <tr>
                          <th>Short:</th>
                          <td class="short"></td>
                        </tr>
                        <tr>
                          <th>Binary ID:</th>
                          <td class="binary_ip"></td>
                        </tr>
                        <tr>
                          <th>Integer ID:</th>
                          <td class="integer_id"></td>
                        </tr>
                        <tr>
                          <th>Hex ID:</th>
                          <td class="hex_id"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <h2 class="font-bold" id="infor-subnet"></h2>
                  <div class="table-responsive">
                    <table class="table table-hover table-bordered table-striped" id="subnet-table">
                      <thead>
                        <tr>
                          <th class="cinfoHd">Network Address</th>
                          <th class="cinfoHdL">Usable Host Range</th>
                          <th class="cinfoHdL">Broadcast Address:</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="pull-right">
          CNTT1 - K58 UTC
        </div>
        <div>
          Copyright by <strong>HoaiPV</strong> &copy; 2019
        </div>
      </div>

    </div>
  </div>

  <div id="fix-div">
    <button class="btn btn-primary" id="calculator-btn"><i class="fa fa-expand"></i> Bộ chuyển</button>
  </div>
  <div id="calModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content modal-lg">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Bộ chuyển</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Text <i class="fa fa-long-arrow-right"></i> Binary</label>
            <div class="input-group">
              <input type="text" class="form-control" id="txtTextIn" placeholder="Enter the Text">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnTextToBinary"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtBinaryOut1" placeholder="Binary Output">
            </div>
          </div>
          <div class="form-group">
            <label>Number <i class="fa fa-long-arrow-right"></i> Binary</label>
            <div class="input-group">
              <input type="number" class="form-control" id="txtNumberIn" placeholder="Enter the Number">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnNumberToBinary"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtBinaryOut2" placeholder="Binary Output">
            </div>
          </div>
          <div class="form-group">
            <label>IP <i class="fa fa-long-arrow-right"></i> Binary</label>
            <div class="input-group">
              <input type="text" class="form-control" id="txtIPIn" placeholder="Enter the IP xxx.xxx.xxx.xxx">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnIPToBinary"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtBinaryOut3" placeholder="Binary Output">
            </div>
          </div>
          <div class="form-group">
            <label>Binary <i class="fa fa-long-arrow-right"></i> Text</label>
            <div class="input-group">
              <input type="number" class="form-control" id="txtBinaryIn1" placeholder="Enter the Binary">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnBinaryToText"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtTextOut" placeholder="Text Output">
            </div>
          </div>
          <div class="form-group">
            <label>Binary <i class="fa fa-long-arrow-right"></i> Number</label>
            <div class="input-group">
              <input type="number" class="form-control" id="txtBinaryIn2" placeholder="Enter the Binary">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnBinaryToNumber"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtNumberOut" placeholder="Number Output">
            </div>
          </div>
          <div class="form-group">
            <label>Binary <i class="fa fa-long-arrow-right"></i> IP</label>
            <div class="input-group">
              <input type="text" class="form-control" id="txtBinaryIn3" placeholder="Enter the Binary">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnBinaryToIP"><i class="fa fa-long-arrow-right"></i></button>
              </span>
              <input type="text" class="form-control" id="txtIPOut" placeholder="IP Output">
            </div>
          </div>
          <div class="form-group">
            <label>Sum Two Binary</label>
            <div class="input-group">
              <input type="text" class="form-control" id="txtBinaryIn4" placeholder="Enter the Binary 1">
              <span class="input-group-btn">
                <button type="button" class="btn btn-primary"><i class="fa fa-plus"></i></button>
              </span>
              <input type="text" class="form-control" id="txtBinaryIn5" placeholder="Enter the Binary 2">

              <span class="input-group-btn">
                <button type="button" class="btn btn-primary" id="btnSumBinary"><i class="fa fa-play"></i></button>
              </span>
              <input type="text" class="form-control" id="txtSumBinary" placeholder="Sum Binary">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mainly scripts -->
  <script src="js/jquery-3.1.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
  <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

  <!-- Custom and plugin javascript -->
  <script src="js/inspinia.js"></script>
  <script src="js/plugins/pace/pace.min.js"></script>
  <script src="js/plugins/iCheck/icheck.min.js"></script>
  <script src="js/plugins/toastr/toastr.min.js"></script>
  <script src="js/plugins/d3js/d3.v3.min.js" charset="utf-8"></script>
  <script src="algorithm/calculator.js"></script>
  <script src="algorithm/ipv4.js"></script>
  <script>
    $(document).ready(function() {
      ipv4('14.162.89.37', '30');
      // [32, '255.255.255.255 /32'],
      load_subnets();
      $('#txtIP').val('14.162.89.37');
      $('#subnets').val('30');

      $('.i-checks').iCheck({
        checkboxClass: 'icheckbox_square-green',
        radioClass: 'iradio_square-green',
      }).on('ifChecked', function() {
        $(this).trigger("change");
      });

      $('.scroll_content').slimscroll({
        height: '700px'
      })

      $('#btn-calculatorIP').click(function() {
        let prefix = $('#subnets').val();
        let ip = $('#txtIP').val();
        if(validateIPaddress(ip)){
          ipv4(ip, prefix);
        } else {
          toastr.error('IP không hợp lệ!');
        }
      });

      $(document).on('click', '.devide', function() {
        if(!$(this).hasClass('disable')){
          let id = $(this).closest('.network').text().split(' ')[0];
          let prefix = parseInt($('#subnets').val()) + 1;
          ipv4(id, prefix);
          $('#txtIP').val(id);
          $('#subnets').val(prefix);
        } else {
          toastr.error("Can not devide!");
        };
      })

      $('input[type=radio][name=network_class]').on('change', function() {
        load_subnets($(this).val());
      });
    });

    function load_subnets(ipclass = '') {
      let lowerlimit = 0;
      if (ipclass == 'a') lowerlimit = 8;
      if (ipclass == 'b') lowerlimit = 16;
      if (ipclass == 'c') lowerlimit = 24;
      let allSubnets = [
        // [32, '255.255.255.255 /32'],
        [31, '255.255.255.254 /31'],[30, '255.255.255.252 /30'],[29, '255.255.255.248 /29'],[28, '255.255.255.240 /28'],[27, '255.255.255.224 /27'],
        [26, '255.255.255.192 /26'],[25, '255.255.255.128 /25'],[24, '255.255.255.0 /24'],[23, '255.255.254.0 /23'],[22, '255.255.252.0 /22'],
        [21, '255.255.248.0 /21'],[20, '255.255.240.0 /20'],[19, '255.255.224.0 /19'],[18, '255.255.192.0 /18'],[17, '255.255.128.0 /17'],
        [16, '255.255.0.0 /16'],[15, '255.254.0.0 /15'],[14, '255.252.0.0 /14'],[13, '255.248.0.0 /13'],[12, '255.240.0.0 /12'],
        [11, '255.224.0.0 /11'],[10, '255.192.0.0 /10'],[9, '255.128.0.0 /9'],[8, '255.0.0.0 /8'],[7, '254.0.0.0 /7'],
        [6, '252.0.0.0 /6'],[5, '248.0.0.0 /5'],[4, '240.0.0.0 /4'],[3, '224.0.0.0 /3'],[2, '192.0.0.0 /2'],
        [1, '128.0.0.0 /1']
      ];
      let opst = ``;
      for (subnet of allSubnets) {
        if (subnet[0] >= lowerlimit) {
          opst += `<option value="${subnet[0]}">${subnet[1]}</option>`
        }
      }
      $('#subnets').empty().append(opst);
    }

    function validateIPaddress(ipaddress) {
      return (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress));
    }
  </script>
</body>

</html>
